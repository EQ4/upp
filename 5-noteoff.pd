#N canvas 124 105 563 692 10;
#X floatatom 54 193 5 0 0 1 MIDI_note - -;
#X obj 54 90 kbd;
#X obj 54 637 bng 15 250 50 0 empty empty overflow 17 7 0 10 -262144
-1 -1;
#X text 128 258 partials;
#X obj 54 229 t a a;
#X obj 54 563 list prepend 0;
#X obj 54 142 unpack;
#X obj 54 164 dilemma;
#X obj 104 142 == 0;
#X floatatom 233 636 5 0 0 0 voices_active - -;
#X obj 344 115 out-mono;
#X obj 27 11 cnv 15 500 40 empty empty Universal_Polyphonic_Player 10 10 0 14
-233017 -66577 0;
#X text 414 14 grrrr.org \, 2011;
#X text 34 34 playing notes with note-dependent timbre and decay;
#X text 57 591 tag bus midinote volume attack decay;
#N canvas 812 212 637 584 timbre 0;
#X obj 90 28 inlet;
#X obj 82 538 outlet;
#N canvas 0 22 450 300 (subpatch) 0;
#X array timbre 150 float 1;
#A 0 87.6777 97.2491 97.2491 97.8919 98.5347 98.5347 98.3205 97.8919
97.2491 96.6062 96.6062 96.6062 96.4991 96.3919 96.3919 96.3919 96.3919
96.3919 96.3919 96.4455 96.4991 96.5527 96.6062 96.6062 96.6062 96.2491
95.892 95.5348 95.4277 95.3205 94.9991 94.6777 94.4634 94.2492 94.6777
95.1063 95.9634 97.8919 98.749 99.6061 98.9633 98.749 98.749 98.749
98.5347 98.3205 97.6776 97.6776 97.0348 97.0348 97.0348 97.1062 97.1776
97.2491 97.4633 97.6776 97.8919 97.2491 96.8205 96.3919 95.1063 94.0349
93.6063 93.392 93.3921 93.4778 93.5635 93.6492 93.7349 94.0349 94.3563
94.4634 94.4634 94.4634 93.8206 93.1778 92.2135 91.2492 90.9278 90.6064
90.6064 90.1778 90.1778 90.0707 89.9636 90.3921 91.035 91.6778 92.3206
92.9635 94.2492 94.2492 94.3563 94.4634 94.892 95.5348 96.1777 96.2848
96.3919 96.3919 96.3919 96.8205 97.2491 97.0348 97.2491 98.1062 98.1062
98.1062 97.8919 95.9634 94.892 93.8206 92.5349 92.5349 92.5349 92.5349
92.5349 92.5349 92.5349 92.5349 92.5349 92.5349 92.5349 92.5349 92.7492
92.9635 92.9635 92.9635 92.7492 92.4278 92.1064 92.1064 92.1064 91.8921
91.8921 91.4635 91.2492 91.2492 91.2492 91.2492 91.2492 91.2492 91.4635
91.4635 91.4635 91.6778 91.6778 91.6778 91.6778 90.6064;
#X coords 0 100 149 70 300 140 1;
#X restore 280 35 graph;
#X floatatom 53 137 5 0 0 0 - - -;
#X floatatom 171 135 5 0 0 0 - - -;
#X obj 54 247 until;
#X obj 54 203 f;
#X obj 53 224 t a b;
#X obj 52 280 f;
#X obj 86 279 + 1;
#X obj 67 167 t b a;
#X obj 84 328 *;
#X msg 108 249 1;
#X obj 83 399 t a a;
#X obj 83 511 pack;
#X obj 115 448 dbtopow;
#X obj 91 61 unpack;
#X text 171 116 partials;
#X text 223 35 dB;
#X text 458 178 MIDI note 0...150;
#X text 116 281 count partials;
#X text 49 346 partial frequencies;
#X text 226 424 fetch gain from table;
#X obj 53 94 mtof;
#X text 24 117 fundamental frq;
#X obj 83 372 ftom;
#X text 45 491 midinote volume;
#X obj 115 425 tabread timbre;
#X msg 469 222 \; timbre const 80;
#X obj 565 20 bng 15 250 50 0 empty empty clear -35 7 0 10 -204786
-1 -1;
#X text 222 52 70..100;
#X connect 0 0 16 0;
#X connect 3 0 10 0;
#X connect 4 0 6 1;
#X connect 5 0 8 0;
#X connect 6 0 7 0;
#X connect 7 0 5 0;
#X connect 7 1 12 0;
#X connect 8 0 9 0;
#X connect 8 0 11 0;
#X connect 9 0 8 1;
#X connect 10 0 6 0;
#X connect 10 1 11 1;
#X connect 11 0 25 0;
#X connect 12 0 8 1;
#X connect 13 0 14 0;
#X connect 13 1 27 0;
#X connect 14 0 1 0;
#X connect 15 0 14 1;
#X connect 16 0 23 0;
#X connect 16 1 4 0;
#X connect 23 0 3 0;
#X connect 25 0 13 0;
#X connect 27 0 15 0;
#X connect 29 0 28 0;
#X coords 0 -1 1 1 300 155 2 280 20;
#X restore 54 299 pd timbre;
#X text 255 457 ---> frequency;
#X text 20 315 gain;
#X text 38 328 ^;
#X text 38 333 |;
#X text 38 346 |;
#X text 161 564 prepend note number as tag;
#X text 196 538 prepend bus name;
#X obj 54 609 x11 x10 voice-mod note_off;
#X text 246 495 add ADSR params (ms ms gain ms);
#X obj 54 257 pack 0 10;
#X obj 54 494 list append 20 100 0.5 500;
#X obj 54 537 list prepend \$0-bus;
#X obj 344 89 catch~ \$0-bus;
#X connect 0 0 4 0;
#X connect 1 0 6 0;
#X connect 4 0 25 0;
#X connect 4 1 5 1;
#X connect 5 0 23 0;
#X connect 6 0 7 0;
#X connect 6 1 8 0;
#X connect 7 0 0 0;
#X connect 7 1 23 1;
#X connect 8 0 7 1;
#X connect 15 0 26 0;
#X connect 23 0 2 0;
#X connect 23 2 9 0;
#X connect 25 0 15 0;
#X connect 26 0 27 0;
#X connect 27 0 5 0;
#X connect 28 0 10 0;
