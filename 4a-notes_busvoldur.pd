#N canvas 209 356 616 314 10;
#X floatatom 71 109 5 0 0 0 - - -;
#X obj 71 25 kbd;
#X obj 364 141 *~ 0;
#X obj 422 121 hsl 128 15 0 127 0 0 empty empty gain(dB) -2 -8 0 10
-204786 -1 -1 10000 1;
#X obj 419 141 dbtopow;
#X obj 364 182 dac~;
#X text 415 183 audio out;
#X obj 71 265 bng 15 250 50 0 empty empty overflow 17 7 0 10 -262144
-1 -1;
#X obj 364 88 catch~ bus;
#X text 145 132 partials;
#X obj 71 131 pack 0 8;
#N canvas 112 75 755 641 timbre+dur 0;
#X obj 90 28 inlet;
#X obj 83 590 outlet;
#N canvas 0 22 450 300 (subpatch) 0;
#X array formant 150 float 1;
#A 0 70.8925 71.2497 71.2497 71.6068 71.9639 71.9639 71.9639 72.3211
72.3211 72.6782 72.6782 73.3925 73.3925 73.3925 73.3925 73.3925 73.9282
74.464 74.8211 75.1783 75.5354 76.2497 76.6068 77.6783 81.2498 81.9641
81.9641 82.3212 82.6784 82.6784 83.0355 83.0355 83.0355 83.0355 83.0355
83.3926 83.3926 83.3926 83.3926 83.3926 83.3926 83.0355 83.0355 82.6784
82.6784 83.0355 84.1069 86.2498 86.9641 88.3927 88.7499 89.4641 90.8927
92.3213 91.2499 90.5356 90.1784 89.107 90.1784 91.9642 93.0356 93.3928
93.3928 90.5356 90.1784 90.1784 90.5356 92.3213 93.3928 93.3928 93.3928
93.0356 90.1784 90.1784 90.1784 90.1784 86.9641 86.2498 86.2498 83.3926
82.6784 82.3212 81.9641 81.6069 81.2498 81.0712 80.8926 80.8926 80.8926
80.8926 81.2498 81.6069 81.9641 83.0355 84.1069 85.1784 85.1784 85.1784
85.1784 85.1784 85.1784 84.8212 81.9641 81.9641 81.6069 81.2498 77.6783
77.6783 77.3211 76.964 76.6068 76.2497 76.2497 75.8926 75.8926 75.5355
75.5355 75.5355 75.1783 74.1069 73.7498 72.3212 72.1426 71.9641 70.8926
70.8926 70.5355 70.1784 69.8212 69.8212 69.8212 69.4641 69.1069 69.1069
69.1069 69.1069 69.1069 69.1069 69.1069 69.1069 69.1069 68.7498 68.3927
68.3927 68.0355 67.6784 67.3213 66.9641 66.9641 66.9641;
#X coords 0 100 149 50 400 140 1;
#X restore 310 43 graph;
#X obj 116 477 tabread formant;
#X floatatom 53 137 5 0 0 0 - - -;
#X floatatom 171 135 5 0 0 0 - - -;
#X obj 54 247 until;
#X obj 54 203 f;
#X obj 53 224 t a b;
#X obj 52 280 f;
#X obj 86 279 + 1;
#X obj 67 167 t b a;
#X obj 84 328 *;
#X msg 108 249 1;
#X obj 116 500 dbtopow;
#X msg 310 358 \; formant const 80;
#X obj 91 61 unpack;
#X text 171 116 partials;
#X text 253 52 50..100;
#X text 589 13 MIDI note 0...150;
#X text 116 281 count partials;
#X text 49 346 partial frequencies;
#X text 229 478 fetch gain from table;
#X obj 53 94 mtof;
#X text 24 117 fundamental frq;
#X obj 83 372 ftom;
#N canvas 0 22 450 300 (subpatch) 0;
#X array duration 150 float 1;
#A 0 967.852 967.852 967.852 967.852 967.852 967.852 967.852 967.852
964.281 960.71 953.567 953.567 953.567 953.567 953.567 939.281 939.281
939.281 935.709 932.138 924.995 924.995 924.995 917.852 917.852 910.709
910.709 896.422 889.279 889.279 882.136 878.565 860.707 860.707 860.707
851.183 841.659 832.135 828.563 824.992 817.849 810.706 799.991 789.276
778.562 767.847 746.418 742.847 739.275 724.989 717.846 710.703 703.56
689.274 682.13 660.701 653.558 646.415 635.701 624.986 610.7 607.128
589.271 585.699 582.128 567.841 560.698 546.412 539.269 524.983 517.84
503.554 489.268 482.125 460.695 453.552 446.409 439.266 428.552 417.837
396.408 389.265 382.122 367.836 360.693 339.263 332.12 317.834 310.691
296.405 289.262 285.69 282.119 274.976 267.833 267.833 260.69 253.547
246.403 242.832 239.26 232.117 217.831 210.688 203.545 196.402 189.259
182.116 174.973 174.973 160.687 153.544 146.401 146.401 139.257 139.257
139.257 132.114 132.114 132.114 124.971 117.828 117.828 117.828 117.828
110.685 110.685 110.685 103.542 103.542 96.399 96.399 89.256 89.256
74.9698 74.9698 74.9698 67.8268 67.8268 60.6837 60.6837 60.6837 60.6837
60.6837 53.5406 53.5406 53.5406 53.5406 46.3976 46.3976;
#X coords 0 1000 149 0 400 140 1;
#X restore 310 199 graph;
#X msg 440 358 \; duration const 500;
#X obj 83 399 t a a a;
#X text 270 445 fetch duration from table;
#X obj 150 446 tabread duration;
#X text 46 543 midinote volume attack decay;
#X obj 84 563 pack 0 0 20 0;
#X text 249 218 0..1000;
#X text 240 200 decay(ms);
#X text 249 34 gain(dB);
#X connect 0 0 16 0;
#X connect 3 0 14 0;
#X connect 4 0 11 0;
#X connect 5 0 7 1;
#X connect 6 0 9 0;
#X connect 7 0 8 0;
#X connect 8 0 6 0;
#X connect 8 1 13 0;
#X connect 9 0 10 0;
#X connect 9 0 12 0;
#X connect 10 0 9 1;
#X connect 11 0 7 0;
#X connect 11 1 12 1;
#X connect 12 0 25 0;
#X connect 13 0 9 1;
#X connect 14 0 32 1;
#X connect 16 0 23 0;
#X connect 16 1 5 0;
#X connect 23 0 4 0;
#X connect 25 0 28 0;
#X connect 28 0 32 0;
#X connect 28 1 3 0;
#X connect 28 2 30 0;
#X connect 30 0 32 3;
#X connect 32 0 1 0;
#X restore 71 153 pd timbre+dur;
#X obj 71 187 list prepend bus;
#X text 74 219 bus midinote volume attack decay;
#X obj 71 238 x11 x10 voice note_busvoldur;
#X obj 71 62 unpack;
#X obj 71 83 spigot;
#X text 113 109 MIDI note;
#X floatatom 264 264 5 0 0 0 voices_active - -;
#X connect 0 0 10 0;
#X connect 1 0 15 0;
#X connect 2 0 5 0;
#X connect 2 0 5 1;
#X connect 3 0 4 0;
#X connect 4 0 2 1;
#X connect 8 0 2 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 14 0;
#X connect 14 0 7 0;
#X connect 14 2 18 0;
#X connect 15 0 16 0;
#X connect 15 1 16 1;
#X connect 16 0 0 0;
